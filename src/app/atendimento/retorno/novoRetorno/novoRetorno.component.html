<div class="row mt-3">
  <div class="container d-flex col-xs-8">
    <h3>Novo Retorno</h3>&nbsp;
  </div>
</div>

<form [formGroup]="cadastroForm" class=" mt-3">
  <div class="col-md-12 mt-3">
      <div class="form-row mt-4">

          <div class="form-group col-md-5">
              <label>Cliente:(*)</label>
              <ng-select style="text-transform: uppercase" [items]="clientes" bindLabel="nomeFantasia" bindValue="id"
                [(ngModel)]="clienteIdSelecionado" formControlName="clienteId">
              </ng-select>
          </div>

        <div class="form-group col-md-2">
          <label>Nome do Solicitante:(*)</label>
          <input style="text-transform: uppercase" oninput="this.value = this.value.toUpperCase()" class="form-control" type="text" formControlName="contatoNome" [ngClass]="{ 'is-invalid': cadastroForm.get('contatoNome').errors && 
                                          cadastroForm.get('contatoNome').touched}" />

          <div *ngIf="cadastroForm.get('contatoNome').hasError('required') &&cadastroForm.get('contatoNome').touched"
            class="invalid-feedback">
            Campo Obrigatório.
          </div>
        </div>

          <div class="form-group col-md-2">
            <label>Telefone:(*)</label>
            <input class="form-control" type="text" maxlength="14" formControlName="telefone" [ngClass]="{ 'is-invalid': cadastroForm.get('telefone').errors && 
                     cadastroForm.get('telefone').touched}" [ngModel]="valueTelefonePipe | celularPipePipe"
              (ngModelChange)="valueTelefonePipe=$event" />
  
            <div *ngIf="cadastroForm.get('telefone').hasError('required') &&cadastroForm.get('telefone').touched"
              class="invalid-feedback">
              Campo é obrigatório.
            </div>
          </div>

          <div class="form-group col-md-2">
            <label>Atendente:</label>
            <ng-select style="text-transform: uppercase" [items]="usuarios" bindLabel="userName" bindValue="id"
              [(ngModel)]="usuarioIdSelecionado" formControlName="usuarioId"> 
            </ng-select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-2">
          <label>Prioridade:</label>
          <ng-select [clearable]="false" [items]="prioridades" [(ngModel)]="prioridadeSelecionado"
            formControlName="prioridade">
          </ng-select>
        </div>       
    </div>
    <div class="form-row ">
      <div class="form-group col-md-7">
        <label>Observação</label>
        <textarea class="form-control"
          formControlName="observacao" rows="2"></textarea>
      </div>
    </div>
    <div *ngIf="!cadastroForm.valid" style="font-size:18px;" class="invalid-feedback d-block">
      Preencha todos os campos com (*).
    </div>
  </div>
</form>
<div class="form-group  offset-md-10 mt-3">
  <button class="btn btn-primary btn-block" [disabled]="!cadastroForm.valid" (click)="cadastrarRetorno()">Cadastrar</button>
</div>
