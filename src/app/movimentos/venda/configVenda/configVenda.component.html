<tabset>

  <tab heading="Geral" style="margin-top: 10px;">

    <div class="box box-primary">
      <div class="box-header with-border">
        <form [formGroup]="cadastroVendaConfig">

          <div class="row">
            <div class="form-group col-md-12">
              <label style="white-space: nowrap;">Plano de Contas(D) Parcela À VISTA(RECEITAS)</label>
              <ng-select style="text-transform: uppercase" [items]="planoContas" bindLabel="descricao" required
                bindValue="id" [clearable]="false" [(ngModel)]="planoContaRecebIdSelecionado"
                formControlName="planoContaRecebParcelaAVistaId">
              </ng-select>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-12">
              <label style="white-space: nowrap;">Plano de Contas(C) Parcela À VISTA(DESPESA)</label>
              <ng-select style="text-transform: uppercase" [items]="planoContas" bindLabel="descricao" required
                bindValue="id" [clearable]="false" [(ngModel)]="planoContaPagIdSelecionado"
                formControlName="planoContaPagParcelaAVistaId">
              </ng-select>
            </div>
          </div>

          <div class="row">
            <div class="form-group col-md-12">
              <label style="white-space: nowrap;">Plano de Pagamento(DESPESAS)</label>
              <ng-select style="text-transform: uppercase" [items]="planosPagamento" bindLabel="descricao" required
                bindValue="id" [clearable]="false" [(ngModel)]="planoPagamentoIdSelecionado"
                formControlName="planoPagamentoSaidasId">
              </ng-select>
            </div>
          </div>

          <div class="row">
              <div class="form-group col-md-12">
                <label style="white-space: nowrap;">Status Inicial da Venda</label>
                <ng-select style="text-transform: uppercase" [items]="vendaStatus" bindLabel="descricao" required
                  bindValue="id" [clearable]="false" [(ngModel)]="vendaStatusInicialIdSelecionado"
                  formControlName="vendaStatusInicialId">
                </ng-select>
              </div>
            </div>

            <div class="row">
                <div class="form-group col-md-12">
                  <label style="white-space: nowrap;">Status Venda Concluída</label>
                  <ng-select style="text-transform: uppercase" [items]="vendaStatus" bindLabel="descricao" required
                    bindValue="id" [clearable]="false" [(ngModel)]="vendaStatusFinalIdSelecionado"
                    formControlName="vendaStatusFinalId">
                  </ng-select>
                </div>
              </div>
        </form>
      </div>
    </div>
    <button class="btn btn-primary" [disabled]="cadastroVendaConfig.get('planoContaRecebParcelaAVistaId').hasError('required') == true ||
        cadastroVendaConfig.get('planoContaPagParcelaAVistaId').hasError('required') == true || 
        cadastroVendaConfig.get('planoPagamentoSaidasId').hasError('required') == true" (click)="salvarAlteracao()">
      Salvar Configurações [GERAL]
    </button>
  </tab>

  <tab heading="Status" style="margin-top: 10px;">
    <div  style="margin-bottom: 10px;"class="float-right">
      <a (click)="abrirTemplateModalVendaStatus(null)" [routerLink]="" class="btn btn-success">
        <i class="fa fa-plus-circle"></i>&nbsp; Novo Status
      </a>
    </div>
    <table style="margin-top: 15px;border-collapse:inherit;" class="table table-striped table-bordered mt-4">
      <thead class="thead-light">
        <tr>
          <th>Descrição</th>
          <th>Posição</th>
          <th style="text-align: center;">Ações</th>
        </tr>
      </thead>
      <tbody *ngIf="this.vendaStatus && this.vendaStatus.length">
        <tr
          *ngFor="let status of this.vendaStatus">
          <td style="white-space: nowrap;">
            <span class="badge" [ngStyle]="{'background-color': status.badgeCor, 'color': 'white'}">
              {{ status.descricao }}
            </span>
          </td>
          <td>{{status.posicao}}</td>
          <td style="text-align: center;white-space: nowrap;">
            <div class="btn-group">
              <a tooltip="Editar/Detalhes" [routerLink]="" (click)="abrirTemplateModalVendaStatus(status)" class="btn btn-sm btn-primary">
                <i class="fa fa-edit"></i>
              </a>
            </div>
          </td>
        </tr>
      </tbody>
      <tfoot *ngIf="!this.vendaStatus">
        <tr colspan="7" class="text-center"></tr>
        <h4>
          Nenhum Status encontrado!
        </h4>
      </tfoot>
    </table>
  </tab>
</tabset>

<app-template-modal *ngIf="this.getTemplateModalVendaStatus() == true" [templateModalService]="templateModalVendaStatusService"
  [component]="this.componentModal" [width]="40"
  [inputs]="this.inputs"></app-template-modal>