<label style="font-weight: bold;font-size:20px;">Nome Fantasia:</label>
&nbsp;<label
  style="font-weight: normal;font-size:20px;">{{(getCliente()) ? getCliente().nomeFantasia : ''}}</label><br />
<label style="font-weight: bold;font-size:20px;">Razão Social:</label>
&nbsp;<label
  style="font-weight: normal;font-size:20px;">{{(getCliente()) ? getCliente().razaoSocial : ''}}</label><br />
<hr width="100%">

<div class="box box-solid">
  <div class="box-header with-border">
    <tabset>

      <tab heading="Geral" style="margin-top: 10px;">

        <form [formGroup]="cadastroForm" class="mt-3">

          <div class="row">
            <div class="col-md-12">
              <div class="box box-success {{this.statusBoxInformacoes}}">
                <div class="box-header with-border">
                  <h3 class="box-title">Informações da Venda</h3>

                  <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" (click)="alterarStatusBoxInformacoes()"><i
                        class="fa fa-minus"></i></button>
                  </div>
                </div>
                <div class="box-body">
                  <div class="row">
                    <div class="form-group col-md-2">
                      <label>Data Negociação </label>
                      <input *ngIf="disabledDataNegociacao() == true" type="text" class="form-control"
                        formControlName="dataNegociacao" [ngModel]="cadastroForm.get('dataNegociacao').value"
                        bsDatepicker [bsConfig]="this.bsConfig" />

                      <input *ngIf="disabledDataNegociacao() == false" type="text" class="form-control"
                        formControlName="dataNegociacao" [ngModel]="cadastroForm.get('dataNegociacao').value"
                        bsDatepicker [bsConfig]="this.bsConfig" />
                    </div>

                    <div class="form-group col-md-2">
                      <label>Data Finalizado </label>
                      <input type="text" class="form-control" formControlName="dataFinalizado"
                        [ngModel]="cadastroForm.get('dataFinalizado').value" bsDatepicker [bsConfig]="this.bsConfig" />
                    </div>

                    <div class="form-group col-md-3">
                      <label>Empresa</label>
                      <ng-select style="text-transform: uppercase" [clearable]="false" [items]="empresas"
                        bindLabel="nomeFantasia" bindValue="id" [(ngModel)]="empresaIdSelecionado"
                        formControlName="empresasId">
                      </ng-select>
                    </div>

                    <div class="form-group col-md-2">
                      <label>Vendedor</label>
                      <ng-select style="text-transform: uppercase" [clearable]="false" [items]="vendedores"
                        bindLabel="nome" bindValue="id" [(ngModel)]="vendedorIdSelecionado"
                        formControlName="vendedorId">
                      </ng-select>
                    </div>

                    <div class="form-group col-md-3">
                      <label>Cliente</label>
                      <ng-select style="text-transform: uppercase" [clearable]="false" [items]="clientes"
                        bindLabel="nomeFantasia" bindValue="id" [(ngModel)]="clienteIdSelecionado"
                        formControlName="clientesId">
                      </ng-select>
                    </div>

                    <div class="form-group col-md-3">
                      <label>Produto</label>
                      <ng-select style="text-transform: uppercase" [clearable]="false" [items]="produtos"
                        bindLabel="descricao" bindValue="id" [(ngModel)]="produtoIdSelecionado"
                        formControlName="produtoId">
                      </ng-select>
                    </div>

                    <div class="form-group col-md-3">
                      <label style="white-space: nowrap;">Plano de Pagamento</label>
                      <ng-select style="text-transform: uppercase" [items]="planosPagamento" bindLabel="descricao"
                        required bindValue="id" [clearable]="false" [(ngModel)]="planoPagamentoIdSelecionado"
                        formControlName="planoPagamentoId">
                      </ng-select>
                    </div>

                    <div class="form-group col-md-2">
                      <label>Status</label>
                      <ng-select [clearable]="false" *ngIf="disabledStatus() == true"
                        (change)="setarDataFinalizado(cadastroForm.get('status').value)" [items]="status"
                        [(ngModel)]="statusSelecionado" formControlName="status">
                      </ng-select>
                    </div>

                  </div>

                  <div class="row ">
                    <div class="form-group col-md-7">
                      <label>Observações</label>
                      <textarea class="form-control" formControlName="observacoes" rows="2"></textarea>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>

        <button *ngIf="this.editar == true || this.editarDataNegociacao || this.editarStatus"
          style="position:relative;margin-bottom: 15px;" [disabled]="!cadastroForm.valid" (click)="salvarAlteracoes()"
          tooltip="Salvar ABA GERAL" class="btn btn-lg btn-primary">
          &nbsp;Salvar Alterações [GERAL]
        </button>

        <button *ngIf="this.gerarPedido == true && !this.autorizadoGerarPedido"
          style="position:relative;margin-bottom: 15px;margin-left:15px;" (click)="solicitarAutorizacao()"
          tooltip="Solicitar Autorização" [disabled]="verificarValorPrevistoLancados()" class="btn btn-lg btn-warning">
          &nbsp;Solicitar Autorização
        </button>

        <button *ngIf="this.gerarPedido == true"
          style="position:relative;margin-bottom: 15px;margin-left:15px;" (click)="gerarPDF()"
          tooltip="Gerar Pedido de Venda" class="btn btn-lg btn-success" [disabled]="!autorizadoGerarPedido">
          &nbsp;Gerar Pedido
        </button>
      </tab>

      <tab heading="Check List" style="margin-top: 10px;">
        <app-check-list-venda *ngIf="this.venda" [venda]="this.venda" [pedido]="false"></app-check-list-venda>
      </tab>

      <tab heading="Financeiro" style="margin-top: 10px;">
        <app-financeiro-venda *ngIf="this.venda" [venda]="this.venda" [editarValorRealizado]="this.editarValorRealizado"
          [editarValorPrevisto]="this.editarValorPrevisto">
        </app-financeiro-venda>
      </tab>

      <tab *ngIf="this.visualizarResultado == true" heading="Resultado" style="margin-top: 10px;">
        <app-resultado-venda *ngIf="this.venda" [venda]="this.venda"></app-resultado-venda>
      </tab>

    </tabset>
  </div>
</div>

<app-pedido-venda *ngIf="getPedidoVenda() == true && this.venda" [venda]="this.venda"></app-pedido-venda>